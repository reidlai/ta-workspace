language: "typescript"
type: "application"
id: "sv-appshell"

tasks:
  dev:
    command: "vite dev --host"
    local: true

  build:
    command: "pnpm run build"
    options:
      mergeArgs: 'replace'
    env:
      CI: "true"
      PUBLIC_API_URL: "http://localhost:8080"
    inputs:
      - "src/**/*"
      - "static/**/*"
      - "svelte.config.js"
      - "vite.config.ts"
    outputs:
      - "build"
      - ".svelte-kit"

  test:
    command: "pnpm run test:unit"
    env:
      PUBLIC_API_URL: "http://localhost:8080"
    inputs:
      - "src/**/*"
      - "tests/**/*"

  lint:
    command: "pnpm run lint"
    env:
      PUBLIC_API_URL: "http://localhost:8080"
